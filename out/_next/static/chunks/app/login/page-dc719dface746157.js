(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{183:(e,t,r)=>{Promise.resolve().then(r.bind(r,8912))},852:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155);r(2115);let a=e=>{let{children:t,size:r="md",variant:a="primary",startIcon:n,endIcon:o,onClick:l,className:i="",disabled:d=!1,type:c="button"}=e;return(0,s.jsxs)("button",{type:c,className:"inline-flex items-center justify-center font-medium gap-2 rounded-lg transition ".concat(i," ").concat({sm:"px-4 py-3 text-sm",md:"px-5 py-3.5 text-sm"}[r]," ").concat({primary:"bg-brand-500 text-white shadow-theme-xs hover:bg-brand-600 disabled:bg-brand-300",outline:"bg-white text-gray-700 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-400 dark:ring-gray-700 dark:hover:bg-white/[0.03] dark:hover:text-gray-300"}[a]," ").concat(d?"cursor-not-allowed opacity-50":""),onClick:l,disabled:d,children:[n&&(0,s.jsx)("span",{className:"flex items-center",children:n}),t,o&&(0,s.jsx)("span",{className:"flex items-center",children:o})]})}},2241:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(5155);r(2115);var a=r(9688);let n=e=>{let{htmlFor:t,children:r,className:n}=e;return(0,s.jsx)("label",{htmlFor:t,className:(0,a.QP)("mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400",n),children:r})}},3041:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155);let a=e=>{let{label:t,checked:r,name:a,id:n,onChange:o,className:l="",disabled:i=!1}=e;return(0,s.jsxs)("label",{className:"flex items-center space-x-3 group cursor-pointer ".concat(i?"cursor-not-allowed opacity-60":""),children:[(0,s.jsxs)("div",{className:"relative w-5 h-5",children:[(0,s.jsx)("input",{id:n,type:"checkbox",name:a,className:"w-5 h-5 appearance-none cursor-pointer dark:border-gray-700 border\n             border-gray-300 checked:border-transparent rounded-md checked:bg-brand-500 \n             disabled:opacity-60 \n          ".concat(l),checked:r,onChange:e=>o(e.target.checked,a),disabled:i}),r&&(0,s.jsx)("svg",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2  -translate-y-1/2 pointer-events-none",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,s.jsx)("path",{d:"M11.6666 3.5L5.24992 9.91667L2.33325 7",stroke:"white",strokeWidth:"1.94437",strokeLinecap:"round",strokeLinejoin:"round"})}),i&&(0,s.jsx)("svg",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2  -translate-y-1/2 pointer-events-none",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,s.jsx)("path",{d:"M11.6666 3.5L5.24992 9.91667L2.33325 7",stroke:"#E4E7EC",strokeWidth:"2.33333",strokeLinecap:"round",strokeLinejoin:"round"})})]}),t&&(0,s.jsx)("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:t})]})}},5152:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(3464),a=r(7383);let n=s.A.create({baseURL:"https://api-quatangv2-f168.attcloud.work/api",headers:{"Content-Type":"application/json"}});{let e=a.A.get("token");e&&(n.defaults.headers.Authorization="Bearer ".concat(e))}let o=n},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},7354:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155);r(2115);let a=e=>{let{success:t=!1,error:r=!1,hint:a,className:n="",disabled:o,...l}=e,i="h-11 w-full rounded-lg border appearance-none px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800 ".concat(n);return o?i+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700":r?i+=" text-error-800 border-error-500 focus:ring-3 focus:ring-error-500/10 dark:text-error-400 dark:border-error-500":t?i+=" text-success-500 border-success-400 focus:ring-success-500/10 focus:border-success-300 dark:text-success-400 dark:border-success-500":i+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800",(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{className:i,disabled:o,...l}),a&&(0,s.jsx)("p",{className:"mt-1.5 text-xs ".concat(r?"text-error-500":t?"text-success-500":"text-gray-500"),children:a})]})}},8625:(e,t,r)=>{"use strict";r.d(t,{H:()=>o,W:()=>n});var s=r(9159),a=r(7383);function n(){let e=a.A.get("token");if(!e)return null;try{return(0,s.s)(e)}catch(e){return console.error("Invalid token:",e),null}}function o(){a.A.remove("token"),localStorage.removeItem("site-system")}},8912:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var s=r(5155),a=r(7383),n=r(3041),o=r(7354),l=r(2241),i=r(852),d=r(9805),c=r(6874),u=r.n(c),h=r(2115),x=r(5695),m=r(8543),g=r(5152);let p={login:async e=>{try{return(await g.A.post("/auth/login",e)).data}catch(e){throw m.oR.error("Vui l\xf2ng li\xean hệ quản trị vi\xean Website"),e}}};var f=r(9576);function b(){let[e,t]=(0,h.useState)(!1),[r,c]=(0,h.useState)(!1),g=(0,x.useRouter)(),[b,y]=(0,h.useState)({username:"",password:"",site:"f168"}),[v,k]=(0,h.useState)(""),[w,j]=(0,h.useState)(!1),{refreshUser:N}=(0,f.A)(),A=e=>{let t=e.target;y(e=>({...e,[t.name]:t.value}))},C=async e=>{e.preventDefault(),k(""),j(!0);try{let e=await p.login(b);localStorage.setItem("site-system","f168"),a.A.set("token",e.data,{expires:1,path:"/"}),N(),200==e.status_code&&e.data?setTimeout(()=>{g.push("/admin")},500):m.oR.error(e.message)}catch(e){k(e.message)}finally{setTimeout(()=>{j(!1)},2e3)}};return(0,s.jsxs)("div",{className:"flex flex-col flex-1 lg:w-1/2 w-full m-auto",children:[(0,s.jsx)("div",{className:"w-full max-w-md sm:pt-10 mx-auto mb-5 p-3 mt-30"}),(0,s.jsx)("div",{className:"flex flex-col justify-center flex-1 w-full max-w-md mx-auto ",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mb-5 sm:mb-8",children:(0,s.jsx)("h1",{className:"mb-2 font-semibold text-center text-gray-800 text-title-sm dark:text-white/90 sm:text-title-md",children:"Đăng Nhập"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("form",{onSubmit:C,children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(l.A,{children:["Email ",(0,s.jsx)("span",{className:"text-error-500",children:"*"})," "]}),(0,s.jsx)(o.A,{placeholder:"Username",type:"text",name:"username",value:b.username,onChange:A})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(l.A,{children:["Password ",(0,s.jsx)("span",{className:"text-error-500",children:"*"})," "]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.A,{type:e?"text":"password",placeholder:"Enter your password",value:b.password,name:"password",onChange:A}),(0,s.jsx)("span",{onClick:()=>t(!e),className:"absolute z-30 -translate-y-1/2 cursor-pointer right-4 top-1/2",children:e?(0,s.jsx)(d.bM,{className:"fill-gray-500 dark:fill-gray-400"}):(0,s.jsx)(d.db,{className:"fill-gray-500 dark:fill-gray-400"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(n.A,{checked:r,onChange:c}),(0,s.jsx)("span",{className:"block font-normal text-gray-700 text-theme-sm dark:text-gray-400",children:"Keep me logged in"})]}),(0,s.jsx)(u(),{href:"/reset-password",className:"text-sm text-brand-500 hover:text-brand-600 dark:text-brand-400",children:"Forgot password?"})]}),(0,s.jsx)("div",{children:(0,s.jsx)(i.A,{className:"w-full",size:"sm",type:"submit",children:w?"Loading...":"Sign in"})})]})}),(0,s.jsx)("div",{className:"mt-5",children:(0,s.jsxs)("p",{className:"text-sm font-normal text-center text-gray-700 dark:text-gray-400 sm:text-start",children:["Chưa c\xf3 t\xe0i khoản vui l\xf2ng li\xean hệ ? ","",(0,s.jsx)(u(),{href:"/signup",className:"text-brand-500 hover:text-brand-600 dark:text-brand-400",children:"Admin"})]})})]})]})})]})}function y(){return(0,s.jsx)(b,{})}},9159:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});class s extends Error{}function a(e,t){let r;if("string"!=typeof e)throw new s("Invalid token specified: must be a string");t||(t={});let a=+(!0!==t.header),n=e.split(".")[a];if("string"!=typeof n)throw new s(`Invalid token specified: missing part #${a+1}`);try{r=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var r;return r=t,decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return atob(t)}}(n)}catch(e){throw new s(`Invalid token specified: invalid base64 for part #${a+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new s(`Invalid token specified: invalid json for part #${a+1} (${e.message})`)}}s.prototype.name="InvalidTokenError"},9576:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,AuthProvider:()=>l});var s=r(5155),a=r(2115),n=r(8625);let o=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,a.useState)(null),[i,d]=(0,a.useState)(!0),c=()=>{d(!0);let e=(0,n.W)();e?l({id:e.id,username:e.username,role:e.role,site:e.site}):l(null),d(!1)};return(0,a.useEffect)(()=>{c()},[]),(0,s.jsx)(o.Provider,{value:{user:r,setUser:l,logout:()=>{(0,n.H)(),l(null),c(),window.location.href="/login"},isLoading:i,refreshUser:()=>{c()}},children:t})},i=()=>{let e=(0,a.useContext)(o);if(!e)throw Error("useAuth must be used within AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[49,464,688,874,805,441,684,358],()=>t(183)),_N_E=e.O()}]);